# yaml-language-server: $schema=https://json.schemastore.org/yaml
#
# Record architectural decisions, version pins, and notable policy changes here.
# Each entry should include: id, title, date, status, context, decision,
# consequences, and follow_up.

- id: ADR-0001
  title: "Initial toolchain and policy baseline"
  date: 2025-11-03
  status: accepted
  context: |
    Bootstrap phase established the repository structure, licensing, and
    contribution guidelines for CiviWave-FEM.
  decision: |
    Adopt GCC 15.2, CMake 4.1.2, Vulkan SDK 1.4.328.1, Slang 2025.18, Doxygen
    1.15+, and an AGPL-3.0-or-later license. Require source-first dependency
    policy with CMake FetchContent and mandate mixed-precision matrix-free
    solvers.
  consequences: |
    Contributors must install the specified toolchain versions (or newer) and
    follow the dependency sourcing rules. Documentation, CI, and future modules
    inherit these baselines, including automated Doxygen generation.
  follow_up: |
    Revisit toolchain versions quarterly and update this ADR with rationale for
    upgrades or compatibility constraints.

- id: ADR-0002
  title: "Canonical versions file and developer setup guides"
  date: 2025-11-03
  status: accepted
  context: |
    Phase 1 requires a canonical place for version pins and clear setup
    instructions for Windows and Linux developers. The project follows a
    latest-preferred policy, so pins represent minimum known-good versions
    rather than hard caps.
  decision: |
    Introduce `docs/versions.yaml` as the living source of truth for toolchain
    and dependency versions. Add developer setup guides: `docs/dev-setup-windows.md`
    and `docs/dev-setup-linux.md`. Document compiler extensions policy in
    `docs/extensions.md` and dependency sourcing rules in `docs/dependencies.md`.
  consequences: |
    CI and local environments validate against `docs/versions.yaml`. New
    contributors have platform-specific setup instructions. Extension usage is
    centralized behind macros and governed by documented safety rules. System
    packages are allowed only when ABI/version/flags match; otherwise, CMake
    `FetchContent` builds from source.
  follow_up: |
    Review and bump preferred versions in `docs/versions.yaml` weekly.
    Update CI images and FetchContent pins accordingly. Add ABI fingerprinting
    in CMake modules to force dependency rebuilds on compiler/flag changes.
